import 'package:flutter/material.dart';
import 'package:flutter/services.dart';

class PrinterView extends StatefulWidget {
  const PrinterView({super.key});

  @override
  State<PrinterView> createState() => _PrinterViewState();
}

class _PrinterViewState extends State<PrinterView> {
  
  static const platform = MethodChannel('samples.flutter.dev/l400');
  String? resultado;

  Future<void> imprimeCFePrinter(String json) async {
    try {
      resultado = await platform.invokeMethod('printerCFe', <String, dynamic>{
        "json": json
      });

      await _toastMensagem(resultado!.split('|')[2]);
    } on PlatformException catch (e) {
      await _toastMensagem("retornou ${e.message}");
    }
  }

  Future<void> imprimeCancCFePrinter(String json) async {
    try {
      resultado = await platform.invokeMethod('printerCancCFe',<String,dynamic>{
        "json": json
      });
      await _toastMensagem(resultado!.split('|')[2]);
    }on PlatformException catch (e) {
      await _toastMensagem("retornou ${e.message}");
    }
  }

  Future<void> _toastMensagem(String mensagem) async {
    final snackBar = SnackBar(
        content: Text('Resposta: $mensagem', style: const TextStyle(color: Colors.deepOrangeAccent),),
        backgroundColor: const Color(0xFF424242),
        duration: const Duration(milliseconds: 2000),
        action: SnackBarAction(
          label: 'Ok',
          textColor: Colors.white60,
          backgroundColor: const Color(0xFF303030),
          onPressed: () {
            // Some code to undo the change.
          },
        ),
      );
      ScaffoldMessenger.of(context).showSnackBar(snackBar);
 }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('Printer L400'),
      ),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: [
            const SizedBox(height: 20,),
            SizedBox(width: 250,
              child: OutlinedButton(onPressed: () async {
                await imprimeCFePrinter("{\"VersaoDadosEnt\":\"0.08\",\"Versao\":\"0.08\",\"Id\":\"CFe35241260927472000116590007884072806972282986\",\"Ide\":{\"CUF\":\"35\",\"CNF\":\"228298\",\"Mod\":\"59\",\"NserieSAT\":\"000788407\",\"NCFe\":\"280697\",\"DEmi\":\"20241208\",\"HEmi\":\"152941\",\"CDV\":\"6\",\"TpAmb\":\"1\",\"CnpjAc\":\"02468872000104\",\"SignAC\":\"G/a93Vm2EKUm3GpXW5nnsNXImXd\\u002Bt7e2LV1sG2Ao1RDE25fRrQKXYO4sp4XSJ64e3tRJVpRLA6K9h9nNmM22WykN47acBeU3ZKoqlhD5NvYbeMqjFKdAfzy7SBV9K5Lj5zMnZ7qVzS\\u002Bfw91RZt9QqP6uZuOEFAkmpwNP284JtlzsMskV/VXEuKb3vPb2WiTwiv7MYxHGdX\\u002Bw\\u002BsGqDMgvhp7UfA/jTGQMhISAh\\u002BvwFw3MtbG6IPKGM2rCEAO4Z6Pb6JLF2I1THGm0YXfY3atpr1R5Y1nHtc00AFg7jBVUZXTMjQMRRUs7e7qGSjJjxnLUmdobeMX6\\u002BrED1R7cRaVB1w==\",\"AssinaturaQRCODE\":\"Y7J8RxlyhiX4PFPa5I4uRC6EbFabh6VGZsOiAUQGqzkPSM8AKeaH8whdBg827srSuJan0tH/PgR\\u002BLg2D7Sn2ntDOHsKFO/Gz8g2kueItACxjsF9qypkKX384HWdnhy1KxmVyXTIKf1gTf9k48ftscBoH7mLGrilznGz4oaMsBWQ80CRv8YJEexrqY4tbHc3VCGVAp037yJokuGivW8tqQFpA3Q0jt\\u002BpZqh\\u002B7/bNmjjRZ9iRrX2iLS0pEj2O/21kUSpDZtvQsTPr4zd2oQaADyAAJ7pTAwVzm5pMBMn8b7xhZehWJmhsZSiFAUqyb6EdOuLIXvnmFRwByQ\\u002BovWIpbew==\",\"NumeroCaixa\":491},\"Emitente\":{\"Cnpj\":\"60927472000116\",\"XNome\":\"CLUB ATHLETICO PAULISTANO\",\"XFant\":\"\",\"CEP\":\"01428001\",\"IE\":\"103886437118  \",\"IM\":\"\",\"CRegTrib\":3,\"CRegTribISSQN\":0,\"IndRatISSQN\":\"N\",\"XLgr\":\"RUA HONDURAS\",\"Nro\":\"1300\",\"XCpl\":\"Nao Informado\",\"XBairro\":\"JARDIM PAULISTA\",\"XMun\":\"SAO PAULO\",\"UF\":\"\"},\"Destinatario\":{\"CNPJ\":\"\",\"CPF\":\"\",\"XNome\":\"\"},\"Entrega\":{\"XLgr\":\"\",\"Nro\":\"\",\"XCpl\":\"\",\"XBairro\":\"\",\"XMun\":\"\",\"UF\":\"\"},\"LDet\":[{\"DetProd\":{\"NItem\":1,\"CProd\":\"34\",\"CEAN\":\"\",\"XProd\":\"COCA COLA 350ML\",\"NCM\":\"22021000\",\"CCEST\":\"0301100\",\"CFOP\":\"5405\",\"UCom\":\"UN\",\"QCom\":2.0000,\"VUnCom\":8.300,\"VProd\":16.60,\"IndRegra\":\"A\",\"VDesc\":0,\"VOutro\":0,\"VItem\":16.60,\"VRatDesc\":0,\"VRatAcr\":0,\"CodProdAnp\":\"\",\"ObsFiscos\":[],\"VItem12741\":0,\"CSTIcms\":\"60\",\"Orig\":0,\"PICMS\":0,\"VICMS\":0,\"CSTPis\":\"07\",\"VBCPis\":0,\"PPIS\":0,\"VPIS\":0,\"QBCProdPis\":0,\"VAliqProdPis\":0,\"CSTCofins\":\"09\",\"VBCCofins\":0,\"PCofins\":0,\"VCofins\":0,\"QBCProdCofins\":0,\"VAliqProdCofins\":0,\"InfAdProduto\":\"\"}},{\"DetProd\":{\"NItem\":2,\"CProd\":\"81538\",\"CEAN\":\"\",\"XProd\":\"CAIPIRINHA VELHO BARREI\",\"NCM\":\"22089000\",\"CCEST\":\"0299900\",\"CFOP\":\"5102\",\"UCom\":\"UN\",\"QCom\":2.0000,\"VUnCom\":16.800,\"VProd\":33.60,\"IndRegra\":\"A\",\"VDesc\":0,\"VOutro\":0,\"VItem\":33.60,\"VRatDesc\":0,\"VRatAcr\":0,\"CodProdAnp\":\"\",\"ObsFiscos\":[],\"VItem12741\":0,\"CSTIcms\":\"00\",\"Orig\":0,\"PICMS\":3.20,\"VICMS\":1.08,\"CSTPis\":\"07\",\"VBCPis\":0,\"PPIS\":0,\"VPIS\":0,\"QBCProdPis\":0,\"VAliqProdPis\":0,\"CSTCofins\":\"09\",\"VBCCofins\":0,\"PCofins\":0,\"VCofins\":0,\"QBCProdCofins\":0,\"VAliqProdCofins\":0,\"InfAdProduto\":\"\"}},{\"DetProd\":{\"NItem\":3,\"CProd\":\"81041\",\"CEAN\":\"\",\"XProd\":\"BOUL PENNE GUARNICAO\",\"NCM\":\"21069090\",\"CCEST\":\"1710100\",\"CFOP\":\"5102\",\"UCom\":\"UN\",\"QCom\":2.0000,\"VUnCom\":35.700,\"VProd\":71.40,\"IndRegra\":\"A\",\"VDesc\":0,\"VOutro\":0,\"VItem\":71.40,\"VRatDesc\":0,\"VRatAcr\":0,\"CodProdAnp\":\"\",\"ObsFiscos\":[],\"VItem12741\":0,\"CSTIcms\":\"00\",\"Orig\":0,\"PICMS\":3.20,\"VICMS\":2.28,\"CSTPis\":\"07\",\"VBCPis\":0,\"PPIS\":0,\"VPIS\":0,\"QBCProdPis\":0,\"VAliqProdPis\":0,\"CSTCofins\":\"09\",\"VBCCofins\":0,\"PCofins\":0,\"VCofins\":0,\"QBCProdCofins\":0,\"VAliqProdCofins\":0,\"InfAdProduto\":\"\"}},{\"DetProd\":{\"NItem\":4,\"CProd\":\"81655\",\"CEAN\":\"\",\"XProd\":\"MEDALHAO DIJON PALMITO\",\"NCM\":\"21069090\",\"CCEST\":\"1710100\",\"CFOP\":\"5102\",\"UCom\":\"UN\",\"QCom\":1.0000,\"VUnCom\":99.000,\"VProd\":99.00,\"IndRegra\":\"A\",\"VDesc\":0,\"VOutro\":0,\"VItem\":99.00,\"VRatDesc\":0,\"VRatAcr\":0,\"CodProdAnp\":\"\",\"ObsFiscos\":[],\"VItem12741\":0,\"CSTIcms\":\"00\",\"Orig\":0,\"PICMS\":3.20,\"VICMS\":3.17,\"CSTPis\":\"07\",\"VBCPis\":0,\"PPIS\":0,\"VPIS\":0,\"QBCProdPis\":0,\"VAliqProdPis\":0,\"CSTCofins\":\"09\",\"VBCCofins\":0,\"PCofins\":0,\"VCofins\":0,\"QBCProdCofins\":0,\"VAliqProdCofins\":0,\"InfAdProduto\":\"\"}},{\"DetProd\":{\"NItem\":5,\"CProd\":\"92554\",\"CEAN\":\"\",\"XProd\":\"MEIO MEDALHAO DIJON PALMITO\",\"NCM\":\"21069090\",\"CCEST\":\"1710100\",\"CFOP\":\"5102\",\"UCom\":\"UN\",\"QCom\":1.0000,\"VUnCom\":62.000,\"VProd\":62.00,\"IndRegra\":\"A\",\"VDesc\":0,\"VOutro\":0,\"VItem\":62.00,\"VRatDesc\":0,\"VRatAcr\":0,\"CodProdAnp\":\"\",\"ObsFiscos\":[],\"VItem12741\":0,\"CSTIcms\":\"00\",\"Orig\":0,\"PICMS\":3.20,\"VICMS\":1.98,\"CSTPis\":\"07\",\"VBCPis\":0,\"PPIS\":0,\"VPIS\":0,\"QBCProdPis\":0,\"VAliqProdPis\":0,\"CSTCofins\":\"09\",\"VBCCofins\":0,\"PCofins\":0,\"VCofins\":0,\"QBCProdCofins\":0,\"VAliqProdCofins\":0,\"InfAdProduto\":\"\"}},{\"DetProd\":{\"NItem\":6,\"CProd\":\"80967\",\"CEAN\":\"\",\"XProd\":\"ROLHA PARA VINHO\",\"NCM\":\"19059090\",\"CCEST\":\"1706201\",\"CFOP\":\"5102\",\"UCom\":\"UN\",\"QCom\":1.0000,\"VUnCom\":42.000,\"VProd\":42.00,\"IndRegra\":\"A\",\"VDesc\":0,\"VOutro\":0,\"VItem\":42.00,\"VRatDesc\":0,\"VRatAcr\":0,\"CodProdAnp\":\"\",\"ObsFiscos\":[],\"VItem12741\":0,\"CSTIcms\":\"00\",\"Orig\":0,\"PICMS\":3.20,\"VICMS\":1.34,\"CSTPis\":\"07\",\"VBCPis\":0,\"PPIS\":0,\"VPIS\":0,\"QBCProdPis\":0,\"VAliqProdPis\":0,\"CSTCofins\":\"09\",\"VBCCofins\":0,\"PCofins\":0,\"VCofins\":0,\"QBCProdCofins\":0,\"VAliqProdCofins\":0,\"InfAdProduto\":\"\"}},{\"DetProd\":{\"NItem\":7,\"CProd\":\"81194\",\"CEAN\":\"\",\"XProd\":\"BRASILEIRINHO\",\"NCM\":\"21069090\",\"CCEST\":\"1710100\",\"CFOP\":\"5102\",\"UCom\":\"UN\",\"QCom\":1.0000,\"VUnCom\":55.100,\"VProd\":55.10,\"IndRegra\":\"A\",\"VDesc\":0,\"VOutro\":0,\"VItem\":55.10,\"VRatDesc\":0,\"VRatAcr\":0,\"CodProdAnp\":\"\",\"ObsFiscos\":[],\"VItem12741\":0,\"CSTIcms\":\"00\",\"Orig\":0,\"PICMS\":3.20,\"VICMS\":1.76,\"CSTPis\":\"07\",\"VBCPis\":0,\"PPIS\":0,\"VPIS\":0,\"QBCProdPis\":0,\"VAliqProdPis\":0,\"CSTCofins\":\"09\",\"VBCCofins\":0,\"PCofins\":0,\"VCofins\":0,\"QBCProdCofins\":0,\"VAliqProdCofins\":0,\"InfAdProduto\":\"\"}},{\"DetProd\":{\"NItem\":8,\"CProd\":\"90767\",\"CEAN\":\"\",\"XProd\":\"SALADA PARMA CORACAO ALC PA\",\"NCM\":\"21069090\",\"CCEST\":\"1710100\",\"CFOP\":\"5102\",\"UCom\":\"UN\",\"QCom\":1.0000,\"VUnCom\":48.500,\"VProd\":48.50,\"IndRegra\":\"A\",\"VDesc\":0,\"VOutro\":0,\"VItem\":48.50,\"VRatDesc\":0,\"VRatAcr\":0,\"CodProdAnp\":\"\",\"ObsFiscos\":[],\"VItem12741\":0,\"CSTIcms\":\"00\",\"Orig\":0,\"PICMS\":3.20,\"VICMS\":1.55,\"CSTPis\":\"07\",\"VBCPis\":0,\"PPIS\":0,\"VPIS\":0,\"QBCProdPis\":0,\"VAliqProdPis\":0,\"CSTCofins\":\"09\",\"VBCCofins\":0,\"PCofins\":0,\"VCofins\":0,\"QBCProdCofins\":0,\"VAliqProdCofins\":0,\"InfAdProduto\":\"\"}},{\"DetProd\":{\"NItem\":9,\"CProd\":\"18\",\"CEAN\":\"\",\"XProd\":\"AGUA S LOUREN C GAS 300ML\",\"NCM\":\"22011000\",\"CCEST\":\"0300100\",\"CFOP\":\"5405\",\"UCom\":\"UN\",\"QCom\":1.0000,\"VUnCom\":7.100,\"VProd\":7.10,\"IndRegra\":\"A\",\"VDesc\":0,\"VOutro\":0,\"VItem\":7.10,\"VRatDesc\":0,\"VRatAcr\":0,\"CodProdAnp\":\"\",\"ObsFiscos\":[],\"VItem12741\":0,\"CSTIcms\":\"60\",\"Orig\":0,\"PICMS\":0,\"VICMS\":0,\"CSTPis\":\"07\",\"VBCPis\":0,\"PPIS\":0,\"VPIS\":0,\"QBCProdPis\":0,\"VAliqProdPis\":0,\"CSTCofins\":\"09\",\"VBCCofins\":0,\"PCofins\":0,\"VCofins\":0,\"QBCProdCofins\":0,\"VAliqProdCofins\":0,\"InfAdProduto\":\"\"}},{\"DetProd\":{\"NItem\":10,\"CProd\":\"81763\",\"CEAN\":\"\",\"XProd\":\"ESTROGONOFF DE CARNE\",\"NCM\":\"21069090\",\"CCEST\":\"1710100\",\"CFOP\":\"5102\",\"UCom\":\"UN\",\"QCom\":1.0000,\"VUnCom\":75.000,\"VProd\":75.00,\"IndRegra\":\"A\",\"VDesc\":0,\"VOutro\":0,\"VItem\":75.00,\"VRatDesc\":0,\"VRatAcr\":0,\"CodProdAnp\":\"\",\"ObsFiscos\":[],\"VItem12741\":0,\"CSTIcms\":\"00\",\"Orig\":0,\"PICMS\":3.20,\"VICMS\":2.40,\"CSTPis\":\"07\",\"VBCPis\":0,\"PPIS\":0,\"VPIS\":0,\"QBCProdPis\":0,\"VAliqProdPis\":0,\"CSTCofins\":\"09\",\"VBCCofins\":0,\"PCofins\":0,\"VCofins\":0,\"QBCProdCofins\":0,\"VAliqProdCofins\":0,\"InfAdProduto\":\"\"}},{\"DetProd\":{\"NItem\":11,\"CProd\":\"81725\",\"CEAN\":\"\",\"XProd\":\"LINGUADO PUR MANDIOQ BAN TE\",\"NCM\":\"21069090\",\"CCEST\":\"1710100\",\"CFOP\":\"5102\",\"UCom\":\"UN\",\"QCom\":1.0000,\"VUnCom\":109.200,\"VProd\":109.20,\"IndRegra\":\"A\",\"VDesc\":0,\"VOutro\":0,\"VItem\":109.20,\"VRatDesc\":0,\"VRatAcr\":0,\"CodProdAnp\":\"\",\"ObsFiscos\":[],\"VItem12741\":0,\"CSTIcms\":\"00\",\"Orig\":0,\"PICMS\":3.20,\"VICMS\":3.49,\"CSTPis\":\"07\",\"VBCPis\":0,\"PPIS\":0,\"VPIS\":0,\"QBCProdPis\":0,\"VAliqProdPis\":0,\"CSTCofins\":\"09\",\"VBCCofins\":0,\"PCofins\":0,\"VCofins\":0,\"QBCProdCofins\":0,\"VAliqProdCofins\":0,\"InfAdProduto\":\"\"}},{\"DetProd\":{\"NItem\":12,\"CProd\":\"81752\",\"CEAN\":\"\",\"XProd\":\"BATATA FRITA\",\"NCM\":\"21069090\",\"CCEST\":\"1710100\",\"CFOP\":\"5102\",\"UCom\":\"UN\",\"QCom\":2.0000,\"VUnCom\":16.600,\"VProd\":33.20,\"IndRegra\":\"A\",\"VDesc\":0,\"VOutro\":0,\"VItem\":33.20,\"VRatDesc\":0,\"VRatAcr\":0,\"CodProdAnp\":\"\",\"ObsFiscos\":[],\"VItem12741\":0,\"CSTIcms\":\"00\",\"Orig\":0,\"PICMS\":3.20,\"VICMS\":1.06,\"CSTPis\":\"07\",\"VBCPis\":0,\"PPIS\":0,\"VPIS\":0,\"QBCProdPis\":0,\"VAliqProdPis\":0,\"CSTCofins\":\"09\",\"VBCCofins\":0,\"PCofins\":0,\"VCofins\":0,\"QBCProdCofins\":0,\"VAliqProdCofins\":0,\"InfAdProduto\":\"\"}},{\"DetProd\":{\"NItem\":13,\"CProd\":\"20946\",\"CEAN\":\"\",\"XProd\":\"COCA COLA ZERO 350ML\",\"NCM\":\"22021000\",\"CCEST\":\"0301100\",\"CFOP\":\"5405\",\"UCom\":\"UN\",\"QCom\":1.0000,\"VUnCom\":8.300,\"VProd\":8.30,\"IndRegra\":\"A\",\"VDesc\":0,\"VOutro\":0,\"VItem\":8.30,\"VRatDesc\":0,\"VRatAcr\":0,\"CodProdAnp\":\"\",\"ObsFiscos\":[],\"VItem12741\":0,\"CSTIcms\":\"60\",\"Orig\":0,\"PICMS\":0,\"VICMS\":0,\"CSTPis\":\"07\",\"VBCPis\":0,\"PPIS\":0,\"VPIS\":0,\"QBCProdPis\":0,\"VAliqProdPis\":0,\"CSTCofins\":\"09\",\"VBCCofins\":0,\"PCofins\":0,\"VCofins\":0,\"QBCProdCofins\":0,\"VAliqProdCofins\":0,\"InfAdProduto\":\"\"}},{\"DetProd\":{\"NItem\":14,\"CProd\":\"30107\",\"CEAN\":\"\",\"XProd\":\"AGUA LINDOYA C GAS\",\"NCM\":\"22011000\",\"CCEST\":\"0300600\",\"CFOP\":\"5405\",\"UCom\":\"UN\",\"QCom\":3.0000,\"VUnCom\":5.700,\"VProd\":17.10,\"IndRegra\":\"A\",\"VDesc\":0,\"VOutro\":0,\"VItem\":17.10,\"VRatDesc\":0,\"VRatAcr\":0,\"CodProdAnp\":\"\",\"ObsFiscos\":[],\"VItem12741\":0,\"CSTIcms\":\"60\",\"Orig\":0,\"PICMS\":0,\"VICMS\":0,\"CSTPis\":\"07\",\"VBCPis\":0,\"PPIS\":0,\"VPIS\":0,\"QBCProdPis\":0,\"VAliqProdPis\":0,\"CSTCofins\":\"09\",\"VBCCofins\":0,\"PCofins\":0,\"VCofins\":0,\"QBCProdCofins\":0,\"VAliqProdCofins\":0,\"InfAdProduto\":\"\"}},{\"DetProd\":{\"NItem\":15,\"CProd\":\"92550\",\"CEAN\":\"\",\"XProd\":\"MEIO LINGUADO PUR MANDIOQ B\",\"NCM\":\"21069090\",\"CCEST\":\"1710100\",\"CFOP\":\"5102\",\"UCom\":\"UN\",\"QCom\":2.0000,\"VUnCom\":69.500,\"VProd\":139.00,\"IndRegra\":\"A\",\"VDesc\":0,\"VOutro\":0,\"VItem\":139.00,\"VRatDesc\":0,\"VRatAcr\":0,\"CodProdAnp\":\"\",\"ObsFiscos\":[],\"VItem12741\":0,\"CSTIcms\":\"00\",\"Orig\":0,\"PICMS\":3.20,\"VICMS\":4.45,\"CSTPis\":\"07\",\"VBCPis\":0,\"PPIS\":0,\"VPIS\":0,\"QBCProdPis\":0,\"VAliqProdPis\":0,\"CSTCofins\":\"09\",\"VBCCofins\":0,\"PCofins\":0,\"VCofins\":0,\"QBCProdCofins\":0,\"VAliqProdCofins\":0,\"InfAdProduto\":\"\"}},{\"DetProd\":{\"NItem\":16,\"CProd\":\"57531\",\"CEAN\":\"\",\"XProd\":\"AGUA S GAS 510ML\",\"NCM\":\"22011000\",\"CCEST\":\"0300100\",\"CFOP\":\"5405\",\"UCom\":\"UN\",\"QCom\":4.0000,\"VUnCom\":5.700,\"VProd\":22.80,\"IndRegra\":\"A\",\"VDesc\":0,\"VOutro\":0,\"VItem\":22.80,\"VRatDesc\":0,\"VRatAcr\":0,\"CodProdAnp\":\"\",\"ObsFiscos\":[],\"VItem12741\":0,\"CSTIcms\":\"60\",\"Orig\":0,\"PICMS\":0,\"VICMS\":0,\"CSTPis\":\"07\",\"VBCPis\":0,\"PPIS\":0,\"VPIS\":0,\"QBCProdPis\":0,\"VAliqProdPis\":0,\"CSTCofins\":\"09\",\"VBCCofins\":0,\"PCofins\":0,\"VCofins\":0,\"QBCProdCofins\":0,\"VAliqProdCofins\":0,\"InfAdProduto\":\"\"}},{\"DetProd\":{\"NItem\":17,\"CProd\":\"80019\",\"CEAN\":\"\",\"XProd\":\"CAFE ESPRESSO\",\"NCM\":\"21011110\",\"CCEST\":\"1710701\",\"CFOP\":\"5102\",\"UCom\":\"UN\",\"QCom\":6.0000,\"VUnCom\":5.800,\"VProd\":34.80,\"IndRegra\":\"A\",\"VDesc\":0,\"VOutro\":0,\"VItem\":34.80,\"VRatDesc\":0,\"VRatAcr\":0,\"CodProdAnp\":\"\",\"ObsFiscos\":[],\"VItem12741\":0,\"CSTIcms\":\"00\",\"Orig\":0,\"PICMS\":3.20,\"VICMS\":1.11,\"CSTPis\":\"07\",\"VBCPis\":0,\"PPIS\":0,\"VPIS\":0,\"QBCProdPis\":0,\"VAliqProdPis\":0,\"CSTCofins\":\"09\",\"VBCCofins\":0,\"PCofins\":0,\"VCofins\":0,\"QBCProdCofins\":0,\"VAliqProdCofins\":0,\"InfAdProduto\":\"\"}},{\"DetProd\":{\"NItem\":18,\"CProd\":\"80243\",\"CEAN\":\"\",\"XProd\":\"SUCO LARANJA\",\"NCM\":\"20098990\",\"CCEST\":\"1701100\",\"CFOP\":\"5102\",\"UCom\":\"UN\",\"QCom\":2.0000,\"VUnCom\":8.800,\"VProd\":17.60,\"IndRegra\":\"A\",\"VDesc\":0,\"VOutro\":0,\"VItem\":17.60,\"VRatDesc\":0,\"VRatAcr\":0,\"CodProdAnp\":\"\",\"ObsFiscos\":[],\"VItem12741\":0,\"CSTIcms\":\"00\",\"Orig\":0,\"PICMS\":3.20,\"VICMS\":0.56,\"CSTPis\":\"07\",\"VBCPis\":0,\"PPIS\":0,\"VPIS\":0,\"QBCProdPis\":0,\"VAliqProdPis\":0,\"CSTCofins\":\"09\",\"VBCCofins\":0,\"PCofins\":0,\"VCofins\":0,\"QBCProdCofins\":0,\"VAliqProdCofins\":0,\"InfAdProduto\":\"\"}},{\"DetProd\":{\"NItem\":19,\"CProd\":\"81017\",\"CEAN\":\"\",\"XProd\":\"MEDALHAO POIVRE RAV ALFRE\",\"NCM\":\"21069090\",\"CCEST\":\"1710100\",\"CFOP\":\"5102\",\"UCom\":\"UN\",\"QCom\":1.0000,\"VUnCom\":99.000,\"VProd\":99.00,\"IndRegra\":\"A\",\"VDesc\":0,\"VOutro\":0,\"VItem\":99.00,\"VRatDesc\":0,\"VRatAcr\":0,\"CodProdAnp\":\"\",\"ObsFiscos\":[],\"VItem12741\":0,\"CSTIcms\":\"00\",\"Orig\":0,\"PICMS\":3.20,\"VICMS\":3.17,\"CSTPis\":\"07\",\"VBCPis\":0,\"PPIS\":0,\"VPIS\":0,\"QBCProdPis\":0,\"VAliqProdPis\":0,\"CSTCofins\":\"09\",\"VBCCofins\":0,\"PCofins\":0,\"VCofins\":0,\"QBCProdCofins\":0,\"VAliqProdCofins\":0,\"InfAdProduto\":\"\"}},{\"DetProd\":{\"NItem\":20,\"CProd\":\"92138\",\"CEAN\":\"\",\"XProd\":\"L ENTRECOTE PARIS\",\"NCM\":\"21069090\",\"CCEST\":\"1710100\",\"CFOP\":\"5102\",\"UCom\":\"UN\",\"QCom\":1.0000,\"VUnCom\":81.600,\"VProd\":81.60,\"IndRegra\":\"A\",\"VDesc\":0,\"VOutro\":0,\"VItem\":81.60,\"VRatDesc\":0,\"VRatAcr\":0,\"CodProdAnp\":\"\",\"ObsFiscos\":[],\"VItem12741\":0,\"CSTIcms\":\"00\",\"Orig\":0,\"PICMS\":3.20,\"VICMS\":2.61,\"CSTPis\":\"07\",\"VBCPis\":0,\"PPIS\":0,\"VPIS\":0,\"QBCProdPis\":0,\"VAliqProdPis\":0,\"CSTCofins\":\"09\",\"VBCCofins\":0,\"PCofins\":0,\"VCofins\":0,\"QBCProdCofins\":0,\"VAliqProdCofins\":0,\"InfAdProduto\":\"\"}},{\"DetProd\":{\"NItem\":21,\"CProd\":\"9999\",\"CEAN\":\"\",\"XProd\":\"Taxa de servico nao obrigatorio.\",\"NCM\":\"99\",\"CCEST\":\"\",\"CFOP\":\"5949\",\"UCom\":\"UN\",\"QCom\":1.0000,\"VUnCom\":107.290,\"VProd\":107.29,\"IndRegra\":\"A\",\"VDesc\":0,\"VOutro\":0,\"VItem\":107.29,\"VRatDesc\":0,\"VRatAcr\":0,\"CodProdAnp\":\"\",\"ObsFiscos\":[],\"VItem12741\":0,\"CSTIcms\":\"40\",\"Orig\":0,\"PICMS\":0,\"VICMS\":0,\"CSTPis\":\"07\",\"VBCPis\":0,\"PPIS\":0,\"VPIS\":0,\"QBCProdPis\":0,\"VAliqProdPis\":0,\"CSTCofins\":\"09\",\"VBCCofins\":0,\"PCofins\":0,\"VCofins\":0,\"QBCProdCofins\":0,\"VAliqProdCofins\":0,\"InfAdProduto\":\"\"}}],\"Total\":{\"VICMS\":32.01,\"VProd\":1180.19,\"VDesc\":0.00,\"VPIS\":0.00,\"VCOFINS\":0.00,\"VPISST\":0.00,\"VCOFINSST\":0.00,\"VOutro\":0.00,\"VCFe\":1180.19,\"VBCISSQNtot\":0,\"VISS\":0,\"VPISISSQNtot\":0,\"VCOFINSISSQNtot\":0,\"VPISSTISSQNtot\":0,\"VCOFINSSTISSQNtot\":0,\"VDescSubtot\":0,\"VAcresSubtot\":0,\"VCFeLei12741\":0},\"LPagtos\":[{\"CMP\":\"03\",\"VMP\":215.00,\"CAdmC\":\"\",\"VTroco\":0},{\"CMP\":\"03\",\"VMP\":432.00,\"CAdmC\":\"\",\"VTroco\":0},{\"CMP\":\"03\",\"VMP\":108.00,\"CAdmC\":\"\",\"VTroco\":0},{\"CMP\":\"03\",\"VMP\":125.19,\"CAdmC\":\"\",\"VTroco\":0},{\"CMP\":\"99\",\"VMP\":100.00,\"CAdmC\":\"\",\"VTroco\":0},{\"CMP\":\"99\",\"VMP\":100.00,\"CAdmC\":\"\",\"VTroco\":0},{\"CMP\":\"99\",\"VMP\":100.00,\"CAdmC\":\"\",\"VTroco\":0.00}],\"InfAdic\":{\"InfCpl\":\" Boulevard Mesa: 52  Atendido por: 13615 FRANCISCO RODRIGUES DE ANDRADE FILHO  Operador: 15929 DANIEL FABIANO PAVAN FELIX - Qtde.Pessoas 0  PDV: 491 CX.: 327 NUMERO COO 18624\",\"ObsFisco\":[{\"XCampoDet\":\"06.07.05.04\",\"XTextoDet\":\"Comete crime quem sonega\"}]},\"IdeCancelado\":{\"NCFeCanc\":\"\",\"DEmiCanc\":\"\",\"HEmiCanc\":\"\",\"AssinaturaQRCODECanc\":\"\"}}");
              }, child: const Text('IMPRESSÃO CFe')),
            ),
            const SizedBox(height: 20,),
            SizedBox(width: 250,
              child: OutlinedButton(onPressed: () async {
                await imprimeCancCFePrinter("{\"VersaoDadosEnt\":\"0.08\",\"Versao\":\"\",\"Id\":\"CFe35211061099008000141599000247280002455850169\",\"Ide\":{\"CUF\":\"35\",\"CNF\":\"585016\",\"Mod\":\"59\",\"NserieSAT\":\"900024728\",\"NCFe\":\"000245\",\"DEmi\":\"20211020\",\"HEmi\":\"122704\",\"CDV\":\"9\",\"TpAmb\":\"\",\"CnpjAc\":\"16716114000172\",\"SignAC\":\"SGR-SAT SISTEMA DE GESTAO E RETAGUARDA DO SAT\",\"AssinaturaQRCODE\":\"ca\\u002B3eN18\\u002Bi2xM\\u002BF/hOXP\\u002B1uF9pH\\u002BuRnk6QYL\\u002BoA/JETBYU6MDDGtbxr\\u002B6I6TRxQKyik8KF48PimPPvgfMLllj/L\\u002BldXlTyT20SGOln0UyyYGEskry0QbO6Eue\\u002BLRqeFj21PGmbN4xdfbTWLGbJnVQOkqY9l7ZCRHpjbOhViPlNpZRlH1St9FSBz\\u002BSpO8370orJUtEtstC3aUMRwhjpTOyKfYMSP/huPPLcqT/ZtZSu9S0iNWmRnbuejOxXZS7hQkT\\u002BRJmf2EnRZwM6oxXmNG\\u002BskeW2fRVlkQFGqNl2mbnErB3NSAskdJ/l62BZ6V94zPVwmYQEGNaxA7VOQGxnP\\u002BRQ==\",\"NumeroCaixa\":255},\"Emitente\":{\"Cnpj\":\"61099008000141\",\"XNome\":\"TAGUS-TEC SERVICOS TECNOLOGICOS LTDA\",\"XFant\":\"TAGUS-TEC\",\"CEP\":\"05311000\",\"IE\":\"111111111111\",\"IM\":\"\",\"CRegTrib\":0,\"CRegTribISSQN\":0,\"IndRatISSQN\":\"\",\"XLgr\":\"AVENIDA MOFARREJ\",\"Nro\":\"840\",\"XCpl\":\"ANDAR 2\",\"XBairro\":\"VILA LEOPOLDINA\",\"XMun\":\"SAO PAULO\",\"UF\":\"\"},\"Destinatario\":{\"CNPJ\":\"\",\"CPF\":\"\",\"XNome\":\"\"},\"Entrega\":{\"XLgr\":\"\",\"Nro\":\"\",\"XCpl\":\"\",\"XBairro\":\"\",\"XMun\":\"\",\"UF\":\"\"},\"LDet\":[],\"Total\":{\"VICMS\":0,\"VProd\":0,\"VDesc\":0,\"VPIS\":0,\"VCOFINS\":0,\"VPISST\":0,\"VCOFINSST\":0,\"VOutro\":0,\"VCFe\":8.50,\"VBCISSQNtot\":0,\"VISS\":0,\"VPISISSQNtot\":0,\"VCOFINSISSQNtot\":0,\"VPISSTISSQNtot\":0,\"VCOFINSSTISSQNtot\":0,\"VDescSubtot\":0,\"VAcresSubtot\":0,\"VCFeLei12741\":0},\"LPagtos\":[],\"InfAdic\":{\"InfCpl\":\"\",\"ObsFisco\":[]},\"IdeCancelado\":{\"NCFeCanc\":\"CFe35211061099008000141599000247280002443506689\",\"DEmiCanc\":\"20211020\",\"HEmiCanc\":\"121423\",\"AssinaturaQRCODECanc\":\"sfoFUwLBlEGocAC8a1LJxgYA73HuXXR3cvloS9Jd9DoNNF12ZSrC46j5yCaeFK8aMZai\u002BRjnDvk8keyzPcVqnanVV3IMQDf9wIdl6nbhF1oPshCEbM5HOkYskGzE5LRg8eqyE5wsezUhI21i5cgiSXichlBPWp32vBZOUeESSERx1J0aRMg0qsLqZhsME\u002BfLu4zGNQ85mlvU5HkhDvqDUCXmYvy\u002BsZ9RbbsMYnSrtRkO57KPEi2Gvrpac/7rkQKIbHNTbFp\u002BN3E6doNoiB7AFDHex4aEWV3WXitSmHJYCKHWnpUxiHdSQRevhdFSDfKQLTiiMId4hHz8fTGzgblRYw==\"}}");
              }, child: const Text('IMPRESSÃO CANCELA CFe')),
            ),
            const SizedBox(height: 20,),

          ],
        ),
      ),
    );
  }
}